import{o as l,c as n,a as t,v as p,F as b,r as k,t as u,b as v,d as c,G as _}from"./index-C98w5xzA.js";const w={class:"space-y-6"},F={key:0,class:"space-y-4"},D={class:"space-y-2"},C={class:"flex items-center space-x-3"},B={class:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm"},j={class:"font-medium text-gray-800"},M={class:"text-sm text-gray-500"},P=["onClick"],V={class:"flex justify-center space-x-4"},z=["disabled"],$={key:0,class:"p-4 bg-green-50 rounded-lg"},A={class:"flex items-center justify-between"},E=["href"],S={__name:"PdfMerge",setup(I){const r=c([]),i=c(!1),d=c(""),f=s=>{const e=Array.from(s.target.files).filter(o=>o.type==="application/pdf");r.value=[...r.value,...e]},g=s=>{const e=Array.from(s.dataTransfer.files).filter(o=>o.type==="application/pdf");r.value=[...r.value,...e]},m=s=>{r.value.splice(s,1)},h=()=>{r.value=[],d.value=""},x=s=>s<1024?s+" B":s<1024*1024?(s/1024).toFixed(1)+" KB":(s/1024/1024).toFixed(2)+" MB",y=async()=>{var e,o;if(r.value.length<2)return;i.value=!0;const s=new FormData;r.value.forEach(a=>{s.append("pdfs",a)});try{const a=await _.post("/api/pdf/merge",s);d.value=a.data.path}catch(a){alert("合并失败: "+(((o=(e=a.response)==null?void 0:e.data)==null?void 0:o.error)||a.message))}finally{i.value=!1}};return(s,e)=>(l(),n("div",w,[t("div",{class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-500 transition-all cursor-pointer",onClick:e[0]||(e[0]=o=>s.$refs.fileInput.click()),onDragover:e[1]||(e[1]=p(()=>{},["prevent"])),onDrop:p(g,["prevent"])},[t("input",{ref:"fileInput",type:"file",accept:".pdf",multiple:"",onChange:f,class:"hidden"},null,544),e[2]||(e[2]=t("svg",{class:"w-12 h-12 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e[3]||(e[3]=t("p",{class:"text-gray-600"},"点击或拖拽上传 PDF 文件（至少2个）",-1)),e[4]||(e[4]=t("p",{class:"text-sm text-gray-400 mt-1"},"按顺序选择多个PDF文件进行合并",-1))],32),r.value.length>0?(l(),n("div",F,[t("div",D,[(l(!0),n(b,null,k(r.value,(o,a)=>(l(),n("div",{key:a,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",C,[t("span",B,u(a+1),1),t("div",null,[t("div",j,u(o.name),1),t("div",M,u(x(o.size)),1)])]),t("button",{onClick:L=>m(a),class:"text-red-500 hover:text-red-600"},[...e[5]||(e[5]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,P)]))),128))]),t("div",V,[t("button",{onClick:h,class:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-all"}," 清空列表 "),t("button",{onClick:y,disabled:r.value.length<2||i.value,class:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all disabled:bg-gray-400"},u(i.value?"合并中...":"合并PDF"),9,z)]),d.value?(l(),n("div",$,[t("div",A,[e[6]||(e[6]=t("div",{class:"text-green-600"},"合并成功！",-1)),t("a",{href:d.value,download:"",class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-all"}," 下载合并PDF ",8,E)])])):v("",!0)])):v("",!0)]))}};export{S as default};
