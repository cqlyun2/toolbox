import{o as n,c as r,a as t,v as x,t as v,x as y,y as V,z as k,b as g,F as C,r as P,d as l,G as w}from"./index-C98w5xzA.js";const M={class:"space-y-6"},j={key:0,class:"space-y-4"},B={class:"p-4 bg-gray-50 rounded-lg"},I={class:"flex items-center justify-between"},S={class:"font-medium text-gray-800"},U={class:"text-sm text-gray-500"},z={class:"grid md:grid-cols-3 gap-4"},N={key:0},T={key:1},$={class:"flex justify-center"},E=["disabled"],G={key:0,class:"space-y-2"},H={class:"text-green-600"},L=["href"],A={__name:"PdfSplit",setup(R){const d=l(null),f=l(null),b=l(0),o=l("range"),m=l(""),c=l(1),u=l(!1),p=l([]),h=s=>{const e=s.target.files[0];e&&(d.value=e,f.value=!0)},D=s=>{const e=s.dataTransfer.files[0];e&&e.type==="application/pdf"&&(d.value=e,f.value=!0)},_=async()=>{const s=new FormData;s.append("pdf",d.value);try{const e=await w.post("/api/pdf/info",s);b.value=e.data.pages}catch{alert("获取页面信息失败")}},F=async()=>{var e,a;if(!d.value)return;u.value=!0,p.value=[];const s=new FormData;s.append("pdf",d.value),s.append("mode",o.value),o.value==="range"?s.append("range",m.value):o.value==="interval"&&s.append("interval",c.value);try{const i=await w.post("/api/pdf/split",s);p.value=i.data.files}catch(i){alert("拆分失败: "+(((a=(e=i.response)==null?void 0:e.data)==null?void 0:a.error)||i.message))}finally{u.value=!1}};return(s,e)=>(n(),r("div",M,[t("div",{class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-500 transition-all cursor-pointer",onClick:e[0]||(e[0]=a=>s.$refs.fileInput.click()),onDragover:e[1]||(e[1]=x(()=>{},["prevent"])),onDrop:x(D,["prevent"])},[t("input",{ref:"fileInput",type:"file",accept:".pdf",onChange:h,class:"hidden"},null,544),e[5]||(e[5]=t("svg",{class:"w-12 h-12 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e[6]||(e[6]=t("p",{class:"text-gray-600"},"点击或拖拽上传 PDF 文件",-1)),e[7]||(e[7]=t("p",{class:"text-sm text-gray-400 mt-1"},"将PDF拆分为多个文件",-1))],32),f.value?(n(),r("div",j,[t("div",B,[t("div",I,[t("div",null,[t("div",S,v(d.value.name),1),t("div",U,"共 "+v(b.value)+" 页",1)]),t("button",{onClick:_,class:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200"}," 加载页面信息 ")])]),t("div",z,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"拆分方式",-1)),y(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>o.value=a),class:"w-full px-4 py-2 border rounded-lg"},[...e[8]||(e[8]=[t("option",{value:"range"},"按页码范围",-1),t("option",{value:"each"},"每页单独拆分",-1),t("option",{value:"interval"},"按间隔拆分",-1)])],512),[[V,o.value]])]),o.value==="range"?(n(),r("div",N,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"页码范围 (如: 1-3,5,7-9)",-1)),y(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>m.value=a),type:"text",class:"w-full px-4 py-2 border rounded-lg",placeholder:"1-3,5,7"},null,512),[[k,m.value]])])):g("",!0),o.value==="interval"?(n(),r("div",T,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"每隔几页拆分",-1)),y(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>c.value=a),type:"number",min:"1",class:"w-full px-4 py-2 border rounded-lg"},null,512),[[k,c.value,void 0,{number:!0}]])])):g("",!0)]),t("div",$,[t("button",{onClick:F,disabled:u.value,class:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all disabled:bg-gray-400"},v(u.value?"拆分中...":"拆分PDF"),9,E)]),p.value.length>0?(n(),r("div",G,[e[12]||(e[12]=t("div",{class:"text-sm font-medium text-gray-700"},"拆分结果：",-1)),(n(!0),r(C,null,P(p.value,(a,i)=>(n(),r("div",{key:i,class:"flex items-center justify-between p-3 bg-green-50 rounded-lg"},[t("div",H,v(a.name),1),t("a",{href:a.path,download:"",class:"px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600"}," 下载 ",8,L)]))),128))])):g("",!0)])):g("",!0)]))}};export{A as default};
