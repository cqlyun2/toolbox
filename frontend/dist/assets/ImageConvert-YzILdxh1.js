import{l as h,o as d,c,a as s,v,F as w,r as k,n as _,t as l,b as C,d as i}from"./index-C98w5xzA.js";const j={class:"space-y-6"},F={key:0,class:"space-y-4"},I={class:"flex items-center justify-center space-x-4"},L=["onClick"],U={class:"grid md:grid-cols-2 gap-4"},D={class:"text-sm font-medium text-gray-700 mb-2"},B=["src"],M={class:"text-sm font-medium text-gray-700 mb-2"},$={class:"flex justify-center"},R={__name:"ImageConvert",setup(G){const o=i(""),n=i(null),u=i(""),a=i("png"),m=["png","jpeg","webp"],f=t=>{const e=t.target.files[0];e&&p(e)},b=t=>{const e=t.dataTransfer.files[0];e&&e.type.startsWith("image/")&&p(e)},p=t=>{o.value=URL.createObjectURL(t),u.value=t.type.split("/")[1]||"unknown",g()},g=()=>{if(!o.value||!n.value)return;const t=new Image;t.onload=()=>{n.value.width=t.width,n.value.height=t.height,n.value.getContext("2d").drawImage(t,0,0)},t.src=o.value};h(a,g);const y=()=>({png:"image/png",jpeg:"image/jpeg",webp:"image/webp"})[a.value]||"image/png",x=()=>{const t=document.createElement("a");t.href=n.value.toDataURL(y(),.9),t.download=`converted.${a.value}`,t.click()};return(t,e)=>(d(),c("div",j,[s("div",{class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-500 transition-all cursor-pointer",onClick:e[0]||(e[0]=r=>t.$refs.fileInput.click()),onDragover:e[1]||(e[1]=v(()=>{},["prevent"])),onDrop:v(b,["prevent"])},[s("input",{ref:"fileInput",type:"file",accept:"image/*",onChange:f,class:"hidden"},null,544),e[2]||(e[2]=s("svg",{class:"w-12 h-12 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e[3]||(e[3]=s("p",{class:"text-gray-600"},"点击或拖拽上传图片",-1)),e[4]||(e[4]=s("p",{class:"text-sm text-gray-400 mt-1"},"支持 JPG, PNG, WebP, GIF 格式",-1))],32),o.value?(d(),c("div",F,[s("div",I,[e[5]||(e[5]=s("span",{class:"text-sm text-gray-600"},"转换为:",-1)),(d(),c(w,null,k(m,r=>s("button",{key:r,onClick:N=>a.value=r,class:_(["px-4 py-2 rounded-lg font-medium transition-all",a.value===r?"bg-blue-500 text-white":"bg-gray-100 text-gray-600"])},l(r.toUpperCase()),11,L)),64))]),s("div",U,[s("div",null,[s("div",D,"原图 ("+l(u.value)+")",1),s("img",{src:o.value,class:"w-full rounded-lg border"},null,8,B)]),s("div",null,[s("div",M,"转换后 ("+l(a.value.toUpperCase())+")",1),s("canvas",{ref_key:"canvas",ref:n,class:"w-full rounded-lg border bg-gray-50"},null,512)])]),s("div",$,[s("button",{onClick:x,class:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all"}," 下载 "+l(a.value.toUpperCase())+" 图片 ",1)])])):C("",!0)]))}};export{R as default};
